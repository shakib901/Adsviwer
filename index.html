<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AdPro Tracker</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap');

* { box-sizing:border-box; margin:0; padding:0; font-family:'Inter', sans-serif; }

body {
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
    padding:15px;
    color:#2d3748;
}

.container {
    background:#ffffff;
    border-radius:24px;
    width:100%;
    max-width:420px;
    padding:32px 24px;
    text-align:center;
    box-shadow:0 20px 40px rgba(0,0,0,0.08);
    border:1px solid rgba(0,0,0,0.05);
    position:relative;
    z-index:10;
}

.header { margin-bottom:30px; }
h1 { font-size:32px; font-weight:700; color:#1a202c; margin-bottom:6px; }
.subtitle { font-size:17px; color:#718096; font-weight:500; }

.auto-toggle { display:flex; align-items:center; justify-content:space-between; background:#f7fafc; padding:14px 20px; border-radius:16px; margin:25px 0; border:1px solid #e2e8f0; }
.auto-toggle label { font-size:17px; font-weight:600; color:#2d3748; }

.switch { position:relative; display:inline-block; width:56px; height:32px; }
.switch input { opacity:0; width:0; height:0; }
.slider { position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background:#cbd5e0; transition:0.4s; border-radius:34px; }
.slider:before { position:absolute; content:""; height:26px; width:26px; left:4px; bottom:3px; background:white; transition:0.4s; border-radius:50%; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
input:checked + .slider { background:#4299e1; }
input:checked + .slider:before { transform:translateX(24px); }

.stats p { font-size:24px; font-weight:600; color:#2d3748; margin:20px 0; }

.progress-circle { width:160px; height:160px; margin:30px auto; position:relative; }
.progress-circle svg { width:160px; height:160px; transform:rotate(-90deg); }
.progress-circle circle { cx:80; cy:80; r:72; fill:none; stroke-width:12; }
.progress-circle .bg { stroke:#e2e8f0; }
.progress-circle .progress { stroke:#4299e1; stroke-linecap:round; stroke-dasharray:452; stroke-dashoffset:452; transition:stroke-dashoffset 1s ease; }
.progress-text { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:32px; font-weight:700; color:#2d3748; }

.buttons button { width:100%; padding:16px; margin:12px 0; border:none; border-radius:16px; font-size:18px; font-weight:600; cursor:pointer; transition:all 0.3s ease; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
.buttons button:nth-child(1) { background:#4299e1; color:white; }
.buttons button:nth-child(1):hover { background:#3182ce; transform:translateY(-3px); }
.buttons button:nth-child(2) { background:#48bb78; color:white; }
.buttons button:nth-child(2):hover { background:#38a169; transform:translateY(-3px); }
.buttons button:disabled { background:#a0aec0; color:#e2e8f0; transform:none; box-shadow:none; cursor:not-allowed; }

.footer-credit { font-size:14px; color:#718096; margin-top:30px; }

.telegram-bubble { position:fixed; bottom:20px; right:20px; width:60px; height:60px; background:#4299e1; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 8px 20px rgba(66,153,225,0.4); transition:0.3s; z-index:100; }
.telegram-bubble:hover { transform:scale(1.15); }
.telegram-bubble img { width:36px; height:36px; }

.success-msg { position:fixed; top:20px; left:50%; transform:translateX(-50%); background:#48bb78; color:white; padding:14px 32px; border-radius:16px; font-weight:600; font-size:18px; opacity:0; transition:all 0.5s; box-shadow:0 10px 25px rgba(72,187,120,0.3); z-index:200; }
.success-msg.show { opacity:1; transform:translateX(-50%) translateY(10px); }

.limit-modal, .sms-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; justify-content:center; align-items:center; z-index:300; }
.limit-modal-content, .sms-modal-content { background:white; padding:35px; border-radius:20px; text-align:center; max-width:320px; box-shadow:0 20px 40px rgba(0,0,0,0.2); }
#modal-message, #sms-message { font-size:17px; color:#2d3748; margin-bottom:25px; line-height:1.6; }
#reset-limit-btn, #close-sms-btn { padding:12px 30px; background:#4299e1; color:white; border:none; border-radius:12px; font-weight:600; cursor:pointer; transition:0.3s; }
#reset-limit-btn:hover, #close-sms-btn:hover { background:#3182ce; }
</style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>AdPro Tracker</h1>
        <div class="subtitle">Watch Ads & Track Progress</div>
    </div>

    <div class="auto-toggle">
        <label>Auto Ads Mode</label>
        <label class="switch">
            <input type="checkbox" id="auto-toggle-switch">
            <span class="slider"></span>
        </label>
    </div>

    <div class="stats">
        <p>Watched Ads: <span id="watched-ads">0</span></p>
    </div>

    <div class="progress-circle">
        <svg>
            <circle class="bg" cx="80" cy="80" r="72"></circle>
            <circle class="progress" cx="80" cy="80" r="72"></circle>
        </svg>
        <div class="progress-text" id="ads-progress">0/60</div>
    </div>

    <div class="buttons">
        <button id="watch-ad-btn">Watch Ad</button>
        <button id="reward-ad-btn">Watch Reward Popup (0/5)</button>
    </div>

    <div class="footer-credit">Developed By SAKIB HOSSAIN</div>
</div>

<a href="https://t.me/bestearningmethod" target="_blank" class="telegram-bubble">
    <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram">
</a>

<div class="success-msg" id="success-msg">Ad Completed!</div>

<!-- Normal Limit Modal -->
<div class="limit-modal" id="limit-modal">
    <div class="limit-modal-content">
        <p id="modal-message"></p>
        <button id="reset-limit-btn">Reset Count</button>
    </div>
</div>

<!-- SMS Reward Claim Popup -->
<div class="sms-modal" id="sms-modal">
    <div class="sms-modal-content">
        <p id="sms-message">Congratulations! You have completed 5 reward ads.<br><br>Contact admin on Telegram channel to claim your reward (SMS/Claim).</p>
        <button id="close-sms-btn">Close</button>
    </div>
</div>

<!-- Monetag Popup/Interstitial SDK - NEW ZONE -->
<script src='//libtl.com/sdk.js' data-zone='10531747' data-sdk='show_10531747'></script>

<!-- Monetag Vignette Banner for Passive Impressions - NEW ZONE -->
<script async src="https://vignette.monetag.com/vignette.js" data-zone="10531747"></script>

<script>
let normalAdsCount = parseInt(localStorage.getItem('normalAdsCount')) || 0;
let rewardAdsCount = parseInt(localStorage.getItem('rewardAdsCount')) || 0;
let autoAdInterval;
let monetagLoaded = false;

const AD_LIMIT = 60;
const REWARD_LIMIT = 5;
const CIRCUMFERENCE = 452;

const AD_FUNCTION_NAME = 'show_10531747';

document.getElementById('watched-ads').textContent = normalAdsCount;
updateProgressCircle();
document.getElementById('reward-ad-btn').textContent = `Watch Reward Popup (${rewardAdsCount}/${REWARD_LIMIT})`;
document.getElementById('watch-ad-btn').disabled = true;

function checkSDK(){
    if(typeof window[AD_FUNCTION_NAME] === 'function'){
        monetagLoaded = true;
        document.getElementById('watch-ad-btn').disabled = false;
    } else setTimeout(checkSDK, 500);
}
window.addEventListener('DOMContentLoaded', checkSDK);

function updateProgressCircle(){
    const progress = normalAdsCount / AD_LIMIT;
    const offset = CIRCUMFERENCE - (progress * CIRCUMFERENCE);
    document.querySelector('.progress-circle .progress').style.strokeDashoffset = offset;
    document.getElementById('ads-progress').textContent = normalAdsCount + '/' + AD_LIMIT;
}

function showSuccess(msg = 'Ad Completed!'){
    const successMsg = document.getElementById('success-msg');
    successMsg.textContent = msg;
    successMsg.classList.add('show');
    setTimeout(() => successMsg.classList.remove('show'), 2000);
}

function showLimitModal(){
    document.getElementById('limit-modal').style.display = 'flex';
    document.getElementById('modal-message').textContent = "60 ads limit reached.\nChange IP or try Reward ads.";
    document.getElementById('reset-limit-btn').onclick = () => {
        normalAdsCount = 0;
        localStorage.setItem('normalAdsCount', 0);
        document.getElementById('watched-ads').textContent = 0;
        updateProgressCircle();
        document.getElementById('limit-modal').style.display = 'none';
    };
}

function showSmsModal(){
    document.getElementById('sms-modal').style.display = 'flex';
}

document.getElementById('close-sms-btn').addEventListener('click', () => {
    document.getElementById('sms-modal').style.display = 'none';
});

const autoSwitch = document.getElementById('auto-toggle-switch');

function startAutoAds(){
    if(normalAdsCount >= AD_LIMIT) { showLimitModal(); return; }
    autoAdInterval = setInterval(() => {
        if(normalAdsCount < AD_LIMIT){
            document.getElementById('watch-ad-btn').click();
        } else {
            autoSwitch.checked = false;
            stopAutoAds();
            showLimitModal();
        }
    }, 5000);
}

function stopAutoAds(){
    clearInterval(autoAdInterval);
}

autoSwitch.addEventListener('change', () => {
    autoSwitch.checked ? startAutoAds() : stopAutoAds();
});

document.getElementById('watch-ad-btn').addEventListener('click', () => {
    if(!monetagLoaded) return alert('Loading...');
    if(normalAdsCount >= AD_LIMIT) return showLimitModal();

    window[AD_FUNCTION_NAME]().then(() => {
        normalAdsCount++;
        localStorage.setItem('normalAdsCount', normalAdsCount);
        document.getElementById('watched-ads').textContent = normalAdsCount;
        updateProgressCircle();
        showSuccess();
        if(normalAdsCount >= AD_LIMIT) {
            showLimitModal();
            autoSwitch.checked = false;
            stopAutoAds();
        }
    }).catch(() => alert('Ad failed!'));
});

document.getElementById('reward-ad-btn').addEventListener('click', () => {
    if(!monetagLoaded) return alert('Loading...');
    if(rewardAdsCount >= REWARD_LIMIT) {
        showSmsModal();
        return;
    }

    window[AD_FUNCTION_NAME]('pop').then(() => {
        rewardAdsCount++;
        localStorage.setItem('rewardAdsCount', rewardAdsCount);
        document.getElementById('reward-ad-btn').textContent = `Watch Reward Popup (${rewardAdsCount}/${REWARD_LIMIT})`;
        showSuccess('Reward Completed!');
        if(rewardAdsCount >= REWARD_LIMIT) {
            showSmsModal();
            document.getElementById('reward-ad-btn').disabled = true;
        }
    }).catch(() => alert('Reward failed!'));
});
</script>

</body>
</html>
